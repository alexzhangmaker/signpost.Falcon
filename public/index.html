<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1 , viewport-fit=cover">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <title>signpost.Falcon</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
  <link href="https://fonts.googleapis.com/css?family=Montserrat&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>

  <!-- APP Manifest  
  <link rel="manifest" href="/manifest.json">
-->
  <style>
    .falconCards{
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .signpostFlex{
      display: flex;
      flex-direction: row;
      flex-wrap: nowrap;
      justify-content: space-between;
      align-items: normal;
      align-content: normal;
    }


    .falconCard .table-responsive{
      max-height: 200px;
    }

    .falconButton:hover{
      cursor: pointer;
    }

  </style>
<style>
	/* Custom style */
    .accordion-button::after {
      background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='%23333' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' d='M8 0a1 1 0 0 1 1 1v6h6a1 1 0 1 1 0 2H9v6a1 1 0 1 1-2 0V9H1a1 1 0 0 1 0-2h6V1a1 1 0 0 1 1-1z' clip-rule='evenodd'/%3e%3c/svg%3e");
      transform: scale(.7) !important;
    }
    .accordion-button:not(.collapsed)::after {
      background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='%23333' xmlns='http://www.w3.org/2000/svg'%3e%3cpath fill-rule='evenodd' d='M0 8a1 1 0 0 1 1-1h14a1 1 0 1 1 0 2H1a1 1 0 0 1-1-1z' clip-rule='evenodd'/%3e%3c/svg%3e");
    }

    
    .accordion-button:not(.collapsed){
      background-color: none !important;
    }

</style>
</head>
<body>

  <nav class="navbar sticky-top navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
          <a href="#" class="navbar-brand">
              <img src="images/icons/falcon-64.png" height="28" alt="falcon">
          </a>
          <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbarCollapse">
              <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
              <div class="navbar-nav">
                  <a href="#" class="nav-item nav-link active">Money Man</a>
                  <a href="#" class="nav-item nav-link">Profile</a>
                  <a href="#" class="nav-item nav-link">Messages</a>
                  <a href="#" class="nav-item nav-link disabled" tabindex="-1">Reports</a>
              </div>
              <div class="navbar-nav ms-auto">
                  <a href="#" class="nav-item nav-link">Login</a>
              </div>
          </div>
      </div>
  </nav>

  <div class="m-4">
    <div class="row row-cols-1 row-cols-md-2 g-4 falconCards" >


      <!----
      <div class='col fcAccount falconCard'>
        <div class="card border-success">
          <div class="card-header signpostFlex">
            <div>
              <i class="bi-bar-chart-line-fill" style="font-size: 24px;"></i>
              <span>资产账户</span>

            </div>
            <div>
              <span>海通证券 -CNY2050.00</span>
              <i class="bi-graph-up" style="color: orangered;font-size: 24px;"></i>
            </div>

          </div>

          <div class="card-body">
              <p class="card-text">NASA launched Parker space probe in 2018 with the mission of making observations of the outer corona of the Sun. It is the first-ever mission to "touch" the Sun.</p>
              <div class="table-responsive"> 
                <table class="table">
                    <thead>
                        <tr>
                            <th>ticker</th>
                            <th>Company</th>
                            <th>Shares</th>
                            <th>Cost</th>
                            <th>Price</th>
                            <th>P/L </th>
                            <th>P/L %</th>
                            <th>Value</th>
                        </tr>
                    </thead>
                    <tbody>
                      
                        
                    </tbody>
                </table>
            </div> 
          </div>
          <div class="card-footer text-muted signpostFlex">
            <span style="font-size: 12px;">2023/10/29</span>
            <i class="bi-info-circle"></i>
            
          </div>
        </div>
      </div>
      
      <div class='col fcExpenditure falconCard'>
        <div class="card border-success">
          <div class="card-header signpostFlex">
            <div>
              <i class="bi-currency-exchange" style="font-size: 24px;"></i>
              <span>当月开支</span>

            </div>
            <div>
              <span>till 2023/10/21</span>
              <i class="bi-graph-up" style="color: orangered;font-size: 24px;"></i>
            </div>
  
          </div>
  
          <div class="card-body">
              <p class="card-text">NASA launched Parker space probe in 2018 with the mission of making observations of the outer corona of the Sun. It is the first-ever mission to "touch" the Sun.</p>
              <div class="table-responsive"> 
                <table class="table">
                    <thead>
                        <tr>
                            <th>date</th>
                            <th>pay for</th>
                            <th>class</th>
                            <th>regular?</th>
                            <th>amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2023/10/21</td>
                            <td>Gasline</td>
                            <td>transportation</td>
                            <td>none</td>
                            <td>THB1052.00</td>
                        </tr>
                        <tr>
                            <td>2023/10/25</td>
                            <td>Dinner</td>
                            <td>Food</td>
                            <td>none</td>
                            <td>THB352.00</td>
                        </tr>
                        <tr>
                            <td>2023/10/26</td>
                            <td>Power</td>
                            <td>Utility</td>
                            <td>monthly</td>
                            <td>THB8052.00</td>

                        </tr>
                        <tr>
                            <td>2023/10/4</td>
                            <td>Water</td>
                            <td>Utility</td>
                            <td>monthly</td>
                            <td>THB1098.00</td>
                        </tr>
                        <tr>
                          <td>2023/10/26</td>
                          <td>Mobile</td>
                          <td>Utility</td>
                          <td>monthly</td>
                          <td>THB550.00</td>
                        </tr>
                        <tr>
                          <td>2023/10/26</td>
                          <td>INTERNET</td>
                          <td>Utility</td>
                          <td>monthly</td>
                          <td>THB650.00</td>

                      </tr>
                        <tr style="color: orchid; font-weight: bold;">
                            <td>2023/10/21</td>
                            <td>/</td>
                            <td>/</td>
                            <td>/</td>
                            <td>THB8052.00</td>

                        </tr>
                          
                    </tbody>
                </table>
            </div> 
          </div>
          <div class="card-footer text-muted signpostFlex">
            <span style="font-size: 12px;">2023/10/29</span>
            <i class="bi-info-circle"></i>
            
          </div>
        </div>
      </div>


      <div class='col fcExpenditure falconCard'>
        <div class="card border-success">
          <div class="card-header signpostFlex">
            <div><i class="bi-currency-exchange" style="font-size: 24px;"></i></div>
            <div>
              <span>till 2023/10/21</span>
              <i class="bi-graph-up" style="color: orangered;font-size: 24px;"></i>
            </div>
  
          </div>
  
          <div class="card-body">
              <p class="card-text">NASA launched Parker space probe in 2018 with the mission of making observations of the outer corona of the Sun. It is the first-ever mission to "touch" the Sun.</p>
              <div class="table-responsive"> 
                <table class="table">
                    <thead>
                        <tr>
                            <th>date</th>
                            <th>pay for</th>
                            <th>class</th>
                            <th>regular?</th>
                            <th>amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2023/10/21</td>
                            <td>Gasline</td>
                            <td>transportation</td>
                            <td>none</td>
                            <td>THB1052.00</td>
                        </tr>
                        <tr>
                            <td>2023/10/25</td>
                            <td>Dinner</td>
                            <td>Food</td>
                            <td>none</td>
                            <td>THB352.00</td>
                        </tr>
                        <tr>
                            <td>2023/10/26</td>
                            <td>Power</td>
                            <td>Utility</td>
                            <td>monthly</td>
                            <td>THB8052.00</td>

                        </tr>
                        <tr>
                            <td>2023/10/4</td>
                            <td>Water</td>
                            <td>Utility</td>
                            <td>monthly</td>
                            <td>THB1098.00</td>
                        </tr>
                        <tr>
                          <td>2023/10/26</td>
                          <td>Mobile</td>
                          <td>Utility</td>
                          <td>monthly</td>
                          <td>THB550.00</td>
                        </tr>
                        <tr>
                          <td>2023/10/<span contenteditable="true">21</span></td>
                          <td>
                            <div class="btn-group">
                              <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown">payment</button>
                              <div class="dropdown-menu">
                                  <a href="#" class="dropdown-item">internet</a>
                                  <a href="#" class="dropdown-item">mobile</a>
                                  <a href="#" class="dropdown-item">gasline</a>
                                  <div class="dropdown-header">power</div>
                                  <a href="#" class="dropdown-item">Clothing</a>
                                  <a href="#" class="dropdown-item">food</a>
                            </div>
                          </td>
                          <td>Utility</td>
                          <td>monthly</td>
                          <td>THB<span contenteditable="true">200.00</span></td>
                        </tr>
                        <tr style="color: orchid; font-weight: bold;">
                            <td>2023/10/21</td>
                            <td>/</td>
                            <td>/</td>
                            <td>/</td>
                            <td>THB8052.00</td>

                        </tr>
                          
                    </tbody>
                </table>
            </div> 
          </div>
          <div class="card-footer text-muted signpostFlex">
            <span style="font-size: 12px;">2023/10/29</span>
            <div>
            <i class="bi-plus-square falconButton" id="idBTNNewSpending"></i>   
            <i class="bi-check-square"></i>         
          </div>
          </div>
        </div>
      </div>

      <div class='col fcMonthlyBalance falconCard'>
        <div class="card border-success">
          <div class="card-header signpostFlex">
            <div>
              <i class="bi-currency-exchange" style="font-size: 24px;"></i>
              <span>逐月收支</span>
            </div>
            <div>
              <span>till 2023/10/21</span>
              <i class="bi-graph-up" style="color: orangered;font-size: 24px;"></i>
            </div>
  
          </div>
  
          <div class="card-body">
              <p class="card-text">NASA launched Parker space probe in 2018 with the mission of making observations of the outer corona of the Sun. It is the first-ever mission to "touch" the Sun.</p>
              <div class="table-responsive"> 
                <table class="table">
                    <thead>
                        <tr>
                            <th>Month</th>
                            <th>Income</th>
                            <th>Spending</th>
                            <th>结余</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Jan.2023</td>
                            <td>$10</td>
                            <td>THB 10,000</td>
                            <td>-RMB 1,700</td>
                        </tr>
                        <tr>
                          <td>Feb.2023</td>
                          <td>$10</td>
                          <td>THB 10,000</td>
                          <td>-RMB 1,700</td>
                        </tr><tr>
                          <td>Mar.2023</td>
                          <td>$10</td>
                          <td>THB 10,000</td>
                          <td>-RMB 1,700</td>
                        </tr><tr>
                          <td>Apr.2023</td>
                          <td>$10</td>
                          <td>THB 10,000</td>
                          <td>-RMB 1,700</td>
                      </tr>
                          
                    </tbody>
                </table>
            </div> 
          </div>
          <div class="card-footer text-muted signpostFlex">
            <span style="font-size: 12px;">2023/10/29</span>
            <div>
              <i class="bi-info-circle" style="font-size: 18px;"></i>   
            </div>
          </div>
        </div>
      </div>
      --->


    </div>
</div>

<div id="myModal" class="modal fade" tabindex="-1">
  <div class="modal-dialog">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title">Confirmation</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
              <p>Do you want to save changes to this document before closing?</p>
              <p class="text-secondary"><small>If you don't save, your changes will be lost.</small></p>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-primary">Save changes</button>
          </div>
      </div>
  </div>
</div>

<script src='./js/mockupJSON.js'></script>
<script>
/*
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
      navigator.serviceWorker.register('/js/PWA_sw.js').then(function(registration) {
          // Registration was successful
          console.log('ServiceWorker registration successful with scope: ', registration.scope);
      }, function(err) {
          // registration failed :(
          console.log('ServiceWorker registration failed: ', err);
      });
  });
}
*/
</script>
<script src="./js/portfolio.js"></script>
<script src="./js/account.js"></script>
<script src="./js/income.js"></script>
<script src="./js/expenditure.js"></script>

<script>


  function renderFalconCard(tagCardContainer,jsonCard={}){
    let cCardHTML = `
      <div class="card border-success">
          <div class="card-header">Featured</div>
          <div class="card-body">
              <h5 class="card-title">NASA Launched Solar Probe</h5>
              <p class="card-text">NASA launched Parker space probe in 2018 with the mission of making observations of the outer corona of the Sun. It is the first-ever mission to "touch" the Sun.</p>
              <a href="#" class="btn btn-primary">Know more</a>
          </div>
          <div class="card-footer text-muted">3 years ago</div>
      </div>
    ` ;

    let tagFalconCard = document.createElement('div') ;
    tagCardContainer.appendChild(tagFalconCard) ;
    tagFalconCard.classList.add('col') ;
    tagFalconCard.innerHTML = cCardHTML ;
    return tagFalconCard ;

  }



document.addEventListener('DOMContentLoaded',async (event)=>{
  let tagFalconCards = document.querySelector('.falconCards') ;
  //tagFalconCards.innerHTML = '' ;
  
  let portfoliojsonURL = `http://127.0.0.1:8080/json/portfolio.json`;
  let response = await fetch(portfoliojsonURL);
  const jsonPortfolio = await response.json();
  console.log(JSON.stringify(jsonPortfolio,null,3)) ;
  
  renderPortfolioCard(tagFalconCards,jsonPortfolio) ;
  renderAccountCard(tagFalconCards,jsonPortfolio.accounts[0]) ;

  
  let jsonURL = `http://127.0.0.1:8080/json?mm=07`;
  response = await fetch(jsonURL);
  const jsonIncomeStream = await response.json();
  console.log(JSON.stringify(jsonIncomeStream,null,3)) ;
  renderFalconIncomeCard(tagFalconCards,jsonIncomeStream) ;

  renderExpenditureCard(tagFalconCards,jsonGlobalExpenditure) ;
  let tagBTN= document.querySelector('#idBTNNewSpending') ;
  tagBTN.addEventListener('click',(event)=>{
    var myModal = new bootstrap.Modal(document.getElementById('myModal'))
    myModal.show();
  }) ;


  
}) ;


</script>
</body>
</html>